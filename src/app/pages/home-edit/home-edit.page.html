<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title>{{"home.home"|translate}}</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content padding>
    <ion-progress-bar type="indeterminate" color="primary" *ngIf="loading"></ion-progress-bar>
    <ion-list *ngIf="!loading">
        <form [formGroup]="homeForm" (ngSubmit)="save()" *ngIf="homeForm">
           <ion-row>
               <ion-col col-12>
                   <mat-form-field class="full-width">
                       <mat-label>{{'home.name'|translate}}</mat-label>
                       <input matInput formControlName="name" type="text" required>
                   </mat-form-field>
                   <mat-error *ngIf="!homeForm.get('name').valid&&homeForm.get('name').touched">
                       {{'home.name_error'|translate}}<strong>{{'home.required'|translate}}</strong>
                   </mat-error>
               </ion-col>
           </ion-row>
           <ion-row>
               <ion-col col-12>
                   <mat-form-field class="full-width">
                       <mat-label>{{'home.telephone'|translate}}</mat-label>
                       <input matInput formControlName="telephone" type="text" required>
                   </mat-form-field>
                   <mat-error *ngIf="!homeForm.get('telephone').valid&&homeForm.get('telephone').touched">
                       {{'home.phone_error'|translate}}<strong>{{'home.required'|translate}}</strong>
                   </mat-error>
               </ion-col>
           </ion-row>
            <div class="map">
                <ksk-gmaps-autocomplete  type="address" [addressLabelText]="'home.address'|translate"
                                         [address]="home.address"
                                         (onAutocompleteSelected)="onAutocompleteSelected($event)"
                                         (onLocationSelected)="onLocationSelected($event)">
                </ksk-gmaps-autocomplete>
                <ksk-google-map
                        [latitude]="lat"
                        [longitude]="lng"
                        [zoom]="zoom"
                        [disableDefaultUI]="false"
                        [zoomControl]="false">
                    <ksk-google-marker [latitude]="lat" [longitude]="lng" [label]="homeForm.get('name').value"></ksk-google-marker>
                </ksk-google-map>
            </div>
            <ion-button mode="md" class="btn btn-dark text--upper" shape="round" color="dark" fill="solid" expand="full"
                        strong="true" (click)="save()" [disabled]="!homeForm.valid">{{"save"|translate}}</ion-button>
        </form>
    </ion-list>
</ion-content>
